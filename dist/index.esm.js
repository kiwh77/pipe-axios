import t from"axios";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function o(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(u=0)),u;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){u.label=s[1];break}if(6===s[0]&&u.label<i[1]){u.label=i[1],i=s;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(s);break}i[2]&&u.ops.pop(),u.trys.pop();continue}s=e.call(t,u)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function s(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var a,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function f(t){return(toString.apply(t).match(/^\[object (\w*)\]$/)||[])[1]}function l(t){return t&&"Object"===f(t)}function p(t){return t&&"String"===f(t)}!function(t){!function(e){var n="object"==typeof c?c:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:r=i(n.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,u={__proto__:[]}instanceof Array,s=!o&&!u,a={create:o?function(){return rt(Object.create(null))}:u?function(){return rt({__proto__:null})}:function(){return rt({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),f="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,p=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,h=new(f||"function"!=typeof WeakMap?nt():WeakMap);function d(t,e,n,r){if(q(n)){if(!W(t))throw new TypeError;if(!V(e))throw new TypeError;return x(t,e)}if(!W(t))throw new TypeError;if(!L(e))throw new TypeError;if(!L(r)&&!q(r)&&!K(r))throw new TypeError;return K(r)&&(r=void 0),j(t,e,n=D(n),r)}function y(t,e){function n(n,r){if(!L(n))throw new TypeError;if(!q(r)&&!J(r))throw new TypeError;A(t,e,n,r)}return n}function v(t,e,n,r){if(!L(n))throw new TypeError;return q(r)||(r=D(r)),A(t,e,n,r)}function m(t,e,n){if(!L(e))throw new TypeError;return q(n)||(n=D(n)),I(t,e,n)}function w(t,e,n){if(!L(e))throw new TypeError;return q(n)||(n=D(n)),T(t,e,n)}function g(t,e,n){if(!L(e))throw new TypeError;return q(n)||(n=D(n)),S(t,e,n)}function _(t,e,n){if(!L(e))throw new TypeError;return q(n)||(n=D(n)),P(t,e,n)}function b(t,e){if(!L(t))throw new TypeError;return q(e)||(e=D(e)),M(t,e)}function k(t,e){if(!L(t))throw new TypeError;return q(e)||(e=D(e)),C(t,e)}function O(t,e,n){if(!L(e))throw new TypeError;q(n)||(n=D(n));var r=E(e,n,!1);if(q(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=h.get(e);return i.delete(n),i.size>0||h.delete(e),!0}function x(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!q(r)&&!K(r)){if(!V(r))throw new TypeError;e=r}}return e}function j(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!q(o)&&!K(o)){if(!L(o))throw new TypeError;r=o}}return r}function E(t,e,n){var r=h.get(t);if(q(r)){if(!n)return;r=new l,h.set(t,r)}var i=r.get(e);if(q(i)){if(!n)return;i=new l,r.set(e,i)}return i}function I(t,e,n){if(T(t,e,n))return!0;var r=Z(e);return!K(r)&&I(t,r,n)}function T(t,e,n){var r=E(e,n,!1);return!q(r)&&G(r.has(t))}function S(t,e,n){if(T(t,e,n))return P(t,e,n);var r=Z(e);return K(r)?void 0:S(t,r,n)}function P(t,e,n){var r=E(e,n,!1);if(!q(r))return r.get(t)}function A(t,e,n,r){E(n,r,!0).set(t,e)}function M(t,e){var n=C(t,e),r=Z(t);if(null===r)return n;var i=M(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new p,u=[],s=0,a=n;s<a.length;s++){var c=a[s];o.has(c)||(o.add(c),u.push(c))}for(var f=0,l=i;f<l.length;f++){c=l[f];o.has(c)||(o.add(c),u.push(c))}return u}function C(t,e){var n=[],r=E(t,e,!1);if(q(r))return n;for(var i=Y(r.keys()),o=0;;){var u=Q(i);if(!u)return n.length=o,n;var s=H(u);try{n[o]=s}catch(t){try{X(i)}finally{throw t}}o++}}function R(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function q(t){return void 0===t}function K(t){return null===t}function U(t){return"symbol"==typeof t}function L(t){return"object"==typeof t?null!==t:"function"==typeof t}function z(t,e){switch(R(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=N(t,r);if(void 0!==i){var o=i.call(t,n);if(L(o))throw new TypeError;return o}return F(t,"default"===n?"number":n)}function F(t,e){if("string"===e){var n=t.toString;if($(n))if(!L(i=n.call(t)))return i;if($(r=t.valueOf))if(!L(i=r.call(t)))return i}else{var r;if($(r=t.valueOf))if(!L(i=r.call(t)))return i;var i,o=t.toString;if($(o))if(!L(i=o.call(t)))return i}throw new TypeError}function G(t){return!!t}function B(t){return""+t}function D(t){var e=z(t,3);return U(e)?e:B(e)}function W(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function $(t){return"function"==typeof t}function V(t){return"function"==typeof t}function J(t){switch(R(t)){case 3:case 4:return!0;default:return!1}}function N(t,e){var n=t[e];if(null!=n){if(!$(n))throw new TypeError;return n}}function Y(t){var e=N(t,i);if(!$(e))throw new TypeError;var n=e.call(t);if(!L(n))throw new TypeError;return n}function H(t){return t.value}function Q(t){var e=t.next();return!e.done&&e}function X(t){var e=t.return;e&&e.call(t)}function Z(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function tt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,u)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function u(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}()}function nt(){var t=16,n=a.create(),r=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&a.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?a.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+c()}while(a.has(n,t));return n[t]=!0,t}function o(t,n){if(!e.call(t,r)){if(!n)return;Object.defineProperty(t,r,{value:a.create()})}return t[r]}function u(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):u(new Uint8Array(t),t):u(new Array(t),t)}function c(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function rt(t){return t.__=void 0,delete t.__,t}t("decorate",d),t("metadata",y),t("defineMetadata",v),t("hasMetadata",m),t("hasOwnMetadata",w),t("getMetadata",g),t("getOwnMetadata",_),t("getMetadataKeys",b),t("getOwnMetadataKeys",k),t("deleteMetadata",O)}(r)}()}(a||(a={}));var h=function(){function t(t){this.sources=[],t&&t.services&&t.services.length&&(this.sources=t.services.reduce((function(t,e){var n=d(e);return n&&t.push(n),t}),[]))}return t.prototype.register=function(t){var e=d(t);e&&this.sources.push(e)},t.prototype.find=function(t){return this.sources.find((function(e){return e.name===t}))},t}();function d(t){var e,n;if(l(n=t)&&"name"in n&&"url"in n&&"method"in n&&(e=t),function(t){return t&&"Array"===f(t)}(t)){var i=t,o=i[0],u=i[1],s=i[2],a=i[3];if(!o||!u||!s)return;e=r({name:o,method:u,url:s},l(a)?a:{})}return e}function y(t){return t&&p(t)&&0!==t.length?t.substring(0,1).toUpperCase()+t.substring(1,t.length):t}var v=function(){function t(){this.name="base";var t=this.handle;this.handle=function(e,n){var r;return o(this,void 0,void 0,(function(){var i,o,a,c,f,l,p,h;return u(this,(function(u){switch(u.label){case 0:return i=(null===(r=e.service)||void 0===r?void 0:r.middleware)||[],o="before"+y(this.name),n.emitter.emit(o,{name:this.name,ctx:e}),a=i.reduce((function(t,e){if("string"==typeof e){var r=n.middleware.find(e);r&&r.at===o&&t.push(r)}else e.at===o&&t.push(e);return t}),[]),c=n.middleware.getGlobal(o),a.length>0||c.length>0?[4,n.pipe.exec(s(s([],c,!0),a,!0),e,n)]:[3,2];case 1:u.sent(),u.label=2;case 2:return[4,t.call(this,e,n)];case 3:return f=u.sent(),l="after"+y(this.name),p=i.reduce((function(t,e){if("string"==typeof e){var r=n.middleware.find(e);r&&r.at===l&&t.push(r)}else e.at===l&&t.push(e);return t}),[]),h=n.middleware.getGlobal(l),p.length>0||h.length>0?[4,n.pipe.exec(s(s([],h,!0),p,!0),e,n)]:[3,5];case 4:u.sent(),u.label=5;case 5:return n.emitter.emit(o,{name:this.name,ctx:e}),[2,f]}}))}))}.bind(this)}return t.prototype.handle=function(t,e){},t}(),m=function(t){function e(e){var n=t.call(this,e)||this;return n.name="UniqueError",n}return n(e,t),e}(Error),w=function(t){function e(e){var n=t.call(this)||this;return n.name="unique",n.interval=0,n.interval=e.interval,n}return n(e,t),e.prototype.handle=function(t,e){return o(this,void 0,void 0,(function(){return u(this,(function(n){return e.bucket.verify(t.id,this.interval)?[2]:[2,new m(t.service.name||t.service.url)]}))}))},e}(v),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="config",e}return n(e,t),e.prototype.handle=function(e,n){return o(this,void 0,void 0,(function(){var o,s,a,c;return u(this,(function(u){if(o=e.initParams,s=o.name,a=i(o,["name"]),s&&p(s))c=n.service.find(s),e.service=c,e.params=r(r({},c.default),e.params);else{if(!a.url)return[2,new Error("service not config!")];e.params=r({method:a.method||"get"},a)}return e.params=a,e.id=n.bucket.getId(e.params),t.prototype.handle.call(this,e,n),[2]}))}))},e}(v);function _(t){return null===t?"null":void 0===t?"undefined":"object"==typeof t?Array.isArray(t)?"array":"object":typeof t}function b(t){return"object"===_(t)?O(t):"array"===_(t)?k(t):t}function k(t){return t.map(b)}function O(t){const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=b(t[n]));return e}function x(t,e=[],n={}){const r={arrayBehaviour:n.arrayBehaviour||"replace"},i=e.map((t=>t||{})),o=t||{};for(let t=0;t<i.length;t++){const e=i[t],n=Object.keys(e);for(let t=0;t<n.length;t++){const i=n[t],u=e[i],s=_(u),a=_(o[i]);if("object"===s)if("undefined"!==a){const t="object"===a?o[i]:{};o[i]=x({},[t,O(u)],r)}else o[i]=O(u);else if("array"===s)if("array"===a){const t=k(u);o[i]="merge"===r.arrayBehaviour?o[i].concat(t):t}else o[i]=k(u);else o[i]=u}}return o}function j(t,...e){return x(t,e)}const E=function(...t){return x({},t)};var I=function(e){function i(n){var r=e.call(this)||this;return r.name="request",r.axiosInstance=t.create(n),r}return n(i,e),i.prototype.handle=function(e,n){var i,s,a,c,f,l,p,h,d;return o(this,void 0,void 0,(function(){var o,y,v,m,w,g,_,b,k,O,x,I,T,S,P;return u(this,(function(u){switch(u.label){case 0:switch(o=e.id,y=e.params,v=e.config,m=e.service,w=y.url,g=y.path,_=y.method,b=y.params,k=y.data,O=y.cancel,x=r({url:w,method:_},v),o&&(x.cancelToken=new t.CancelToken((function(t){e.cancel=t,O&&"function"==typeof O&&O(t,o)}))),m.default.assign){case"default":I=j(g,null===(i=null==m?void 0:m.default)||void 0===i?void 0:i.path),T=j(b,null===(s=null==m?void 0:m.default)||void 0===s?void 0:s.params),S=j(k,null===(a=null==m?void 0:m.default)||void 0===a?void 0:a.data);break;case"mixin":I=E(null===(c=null==m?void 0:m.default)||void 0===c?void 0:c.path,g),T=E(null===(f=null==m?void 0:m.default)||void 0===f?void 0:f.params,b),S=E(null===(l=null==m?void 0:m.default)||void 0===l?void 0:l.data,k);break;default:I=j(null===(p=null==m?void 0:m.default)||void 0===p?void 0:p.path,g),T=j(null===(h=null==m?void 0:m.default)||void 0===h?void 0:h.params,b),S=j(null===(d=null==m?void 0:m.default)||void 0===d?void 0:d.data,k)}return x.url=function(t,e){return void 0===e&&(e={}),t.split("/").map((function(t){return new RegExp("^:").test(t)&&e[t.replace(":","")]?e[t.replace(":","")]:t})).join("/")}(w,I),x.params=T,x.data=S,P=e,[4,this.axiosInstance.request(x)];case 1:return P.response=u.sent(),n.bucket.pop(e.id),[2]}}))}))},i}(v),T=function(){function t(t){this.sources=[];var e=t||{},n=e.interval,r=e.requesterConfig,i=[];if(i.push(new g),n>0&&i.push(new w({interval:n})),"object"!=typeof window)throw new Error("not support current system env!");i.push(new I(r)),this.sources=i}return t.prototype.push=function(t){return this.sources.push(t),this},t.prototype.before=function(t,e){var n=this._getIndex(t);return 0===n?this.sources.unshift(e):this.sources.splice(n,0,e),this},t.prototype.after=function(t,e){var n=this._getIndex(t);return this.sources.splice(0===n?1:n+1,0,e),this},t.prototype.replace=function(t,e){var n=this._getIndex(t);return this.sources[n]=e,this},t.prototype.remove=function(t){var e=this._getIndex(t);return this.sources.splice(e,1),this},t.prototype._getIndex=function(t){return"number"==typeof t?Math.floor(t):this.sources.findIndex((function(e){return e.name===t}))},t.prototype.register=function(t){this.sources.push(t)},t}(),S=function(){function t(t){var e;this.sources=[],(null===(e=null==t?void 0:t.middlewares)||void 0===e?void 0:e.length)>0&&(this.sources=t.middlewares.filter(this.verify))}return t.prototype.register=function(t){if(this.verify(t))return this.sources.push(t),t.name},t.prototype.verify=function(t){return(null==t?void 0:t.at)&&(null==t?void 0:t.name)&&(null==t?void 0:t.handle)&&((e=t.handle)&&"Function"===f(e));var e},t.prototype.find=function(t){return this.sources.find((function(e){return e.name===t}))},t.prototype.getGlobal=function(t){return this.sources.filter((function(e){return!0===e.global&&e.at===t}))},t}();var P=function(){function t(){this.requests={}}return t.prototype.getId=function(t){var e=t.url,n=t.method,r=t.params,i=t.path,o=t.data;return this._getId({url:e,method:n,params:r,path:i,data:o})},t.prototype.verify=function(t,e){var n=this.requests[t];return!((null==n?void 0:n.timestamp)+e>Date.now())&&(this.requests[t]={timestamp:Date.now()},t)},t.prototype.pop=function(t){delete this.requests[t]},t.prototype._getId=function(t){return function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,r,i,o,u;return i=2147483648&t,o=2147483648&e,u=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(r=1073741824&e)?2147483648^u^i^o:n|r?1073741824&u?3221225472^u^i^o:1073741824^u^i^o:u^i^o}function r(t,r,i,o,u,s,a){return t=n(t,n(n(function(t,e,n){return t&e|~t&n}(r,i,o),u),a)),n(e(t,s),r)}function i(t,r,i,o,u,s,a){return t=n(t,n(n(function(t,e,n){return t&n|e&~n}(r,i,o),u),a)),n(e(t,s),r)}function o(t,r,i,o,u,s,a){return t=n(t,n(n(function(t,e,n){return t^e^n}(r,i,o),u),a)),n(e(t,s),r)}function u(t,r,i,o,u,s,a){return t=n(t,n(n(function(t,e,n){return e^(t|~n)}(r,i,o),u),a)),n(e(t,s),r)}function s(t){var e,n="",r="";for(e=0;3>=e;e++)n+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return n}var a,c,f,l,p,h,d,y,v,m;for(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);128>r?e+=String.fromCharCode(r):r>127&&2048>r?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t),m=function(t){for(var e,n=t.length,r=n+8,i=16*((r-r%64)/64+1),o=new Array(i-1),u=0,s=0;n>s;)u=s%4*8,o[e=(s-s%4)/4]=o[e]|t.charCodeAt(s)<<u,s++;return u=s%4*8,o[e=(s-s%4)/4]=o[e]|128<<u,o[i-2]=n<<3,o[i-1]=n>>>29,o}(t),h=1732584193,d=4023233417,y=2562383102,v=271733878,a=0;a<m.length;a+=16)c=h,f=d,l=y,p=v,h=r(h,d,y,v,m[a+0],7,3614090360),v=r(v,h,d,y,m[a+1],12,3905402710),y=r(y,v,h,d,m[a+2],17,606105819),d=r(d,y,v,h,m[a+3],22,3250441966),h=r(h,d,y,v,m[a+4],7,4118548399),v=r(v,h,d,y,m[a+5],12,1200080426),y=r(y,v,h,d,m[a+6],17,2821735955),d=r(d,y,v,h,m[a+7],22,4249261313),h=r(h,d,y,v,m[a+8],7,1770035416),v=r(v,h,d,y,m[a+9],12,2336552879),y=r(y,v,h,d,m[a+10],17,4294925233),d=r(d,y,v,h,m[a+11],22,2304563134),h=r(h,d,y,v,m[a+12],7,1804603682),v=r(v,h,d,y,m[a+13],12,4254626195),y=r(y,v,h,d,m[a+14],17,2792965006),h=i(h,d=r(d,y,v,h,m[a+15],22,1236535329),y,v,m[a+1],5,4129170786),v=i(v,h,d,y,m[a+6],9,3225465664),y=i(y,v,h,d,m[a+11],14,643717713),d=i(d,y,v,h,m[a+0],20,3921069994),h=i(h,d,y,v,m[a+5],5,3593408605),v=i(v,h,d,y,m[a+10],9,38016083),y=i(y,v,h,d,m[a+15],14,3634488961),d=i(d,y,v,h,m[a+4],20,3889429448),h=i(h,d,y,v,m[a+9],5,568446438),v=i(v,h,d,y,m[a+14],9,3275163606),y=i(y,v,h,d,m[a+3],14,4107603335),d=i(d,y,v,h,m[a+8],20,1163531501),h=i(h,d,y,v,m[a+13],5,2850285829),v=i(v,h,d,y,m[a+2],9,4243563512),y=i(y,v,h,d,m[a+7],14,1735328473),h=o(h,d=i(d,y,v,h,m[a+12],20,2368359562),y,v,m[a+5],4,4294588738),v=o(v,h,d,y,m[a+8],11,2272392833),y=o(y,v,h,d,m[a+11],16,1839030562),d=o(d,y,v,h,m[a+14],23,4259657740),h=o(h,d,y,v,m[a+1],4,2763975236),v=o(v,h,d,y,m[a+4],11,1272893353),y=o(y,v,h,d,m[a+7],16,4139469664),d=o(d,y,v,h,m[a+10],23,3200236656),h=o(h,d,y,v,m[a+13],4,681279174),v=o(v,h,d,y,m[a+0],11,3936430074),y=o(y,v,h,d,m[a+3],16,3572445317),d=o(d,y,v,h,m[a+6],23,76029189),h=o(h,d,y,v,m[a+9],4,3654602809),v=o(v,h,d,y,m[a+12],11,3873151461),y=o(y,v,h,d,m[a+15],16,530742520),h=u(h,d=o(d,y,v,h,m[a+2],23,3299628645),y,v,m[a+0],6,4096336452),v=u(v,h,d,y,m[a+7],10,1126891415),y=u(y,v,h,d,m[a+14],15,2878612391),d=u(d,y,v,h,m[a+5],21,4237533241),h=u(h,d,y,v,m[a+12],6,1700485571),v=u(v,h,d,y,m[a+3],10,2399980690),y=u(y,v,h,d,m[a+10],15,4293915773),d=u(d,y,v,h,m[a+1],21,2240044497),h=u(h,d,y,v,m[a+8],6,1873313359),v=u(v,h,d,y,m[a+15],10,4264355552),y=u(y,v,h,d,m[a+6],15,2734768916),d=u(d,y,v,h,m[a+13],21,1309151649),h=u(h,d,y,v,m[a+4],6,4149444226),v=u(v,h,d,y,m[a+11],10,3174756917),y=u(y,v,h,d,m[a+2],15,718787259),d=u(d,y,v,h,m[a+9],21,3951481745),h=n(h,c),d=n(d,f),y=n(y,l),v=n(v,p);return(s(h)+s(d)+s(y)+s(v)).toLowerCase()}(Object.keys(t).sort().map((function(e){var n,r=t[e];if("object"==typeof r)try{n=JSON.stringify(r)}catch(t){}else n="".concat(e,"=").concat(r);return n})).join("&"))},t}(),A=function(){function t(){this.events={}}return t.prototype.on=function(t,e){if(t&&e){var n=this.events[t];n?n.push(e):this.events[t]=[e]}},t.prototype.off=function(t,e){if(t){var n=this.events[t];if(n){var r=n.indexOf(e);r>-1?n.splice(r,1):this.events[t]=[]}}},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];(this.events[t]||[]).forEach((function(t){t&&t.apply(void 0,e)}))},t}(),M=function(){function t(){}return t.prototype.exec=function(t,e,n){return o(this,void 0,void 0,(function(){function r(i){return o(this,void 0,void 0,(function(){var o,s;return u(this,(function(u){switch(u.label){case 0:return i>=t.length?[2]:(o=t[i],e.step=o.name,[4,o.handle(e,n)]);case 1:if(s=u.sent())throw s;return[4,r(i+1)];case 2:return u.sent(),[2]}}))}))}return u(this,(function(t){switch(t.label){case 0:return[4,r(0)];case 1:return t.sent(),[2,e.response]}}))}))},t}(),C=function(t){this.initParams=t},R=function(){function t(t){this.pipe=new M,this.bucket=new P,this.emitter=new A,this.middleware=new S(t),this.processor=new T(t),this.service=new h(t)}return t.prototype.send=function(t){return o(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.pipe.exec(this.processor.sources,new C(t),{pipe:this.pipe,bucket:this.bucket,emitter:this.emitter,service:this.service,processor:this.processor,middleware:this.middleware})];case 1:return[2,n.sent()];case 2:return e=n.sent(),[2,Promise.reject(e)];case 3:return[2]}}))}))},t.prototype.get=function(t,e){return this.send(r(r({},e),{method:"get",url:t}))},t.prototype.post=function(t,e){return this.send(r(r({},e),{method:"post",url:t}))},t.prototype.put=function(t,e){return this.send(r(r({},e),{method:"put",url:t}))},t.prototype.delete=function(t,e){return this.send(r(r({},e),{method:"delete",url:t}))},t.prototype.patch=function(t,e){return this.send(r(r({},e),{method:"patch",url:t}))},t.prototype.install=function(t){t.config&&t.config.globalProperties?t.config.globalProperties.$http=this:t.constructor&&(t.prototype.$http=this)},t}(),q=Symbol("service"),K=Symbol("middleware");function U(t){if(!R.simpleInstance){var e=Reflect.getMetadata(q,h)||[],n=Reflect.getMetadata(K,S)||[],o=t||{},u=o.services,a=void 0===u?[]:u,c=o.middlewares,f=void 0===c?[]:c,l=i(o,["services","middlewares"]);R.simpleInstance=new R(r(r({},l),{services:s(s([],a,!0),e,!0),middlewares:s(s([],f,!0),n,!0)}))}return R.simpleInstance}function L(t){var e=d(t);if(e){if(R.simpleInstance)R.simpleInstance.service.register(e);else{var n=Reflect.getMetadata(q,h)||[];(0===n.length||n.some((function(t){return t.name!==e.name})))&&n.push(e),Reflect.defineMetadata(q,n,h)}return function(t){return R.simpleInstance.send(r(r({},e),t))}}}function z(t){if(t){if(!R.simpleInstance){var e=Reflect.getMetadata(K,S)||[];if(e.some((function(e){return e.name===t.name})))throw new Error("middleware [".concat(t.name,"] duplicate definition!"));return e.push(t),Reflect.defineMetadata(K,e,S),t.name}return R.simpleInstance.middleware.register(t)}}function F(t,e){if(R.simpleInstance){var n=R.simpleInstance.service.sources.find((function(e){return e.name===t}));return R.simpleInstance.send(r(r({},n),e))}}export{R as WuhaoNetwork,U as createNetwork,F as useFetch,z as useMiddleware,L as useService};
