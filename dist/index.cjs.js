"use strict";var t=require("axios");function e(t){return(toString.apply(t).match(/^\[object (\w*)\]$/)||[])[1]}function r(t){return t&&"Object"===e(t)}function n(t){return t&&"String"===e(t)}function o(t){return t&&n(t)&&0!==t.length?t.substring(0,1).toUpperCase()+t.substring(1,t.length):t}var i,u=function(t){this.initParams=t};function s(t){return"error"+o(t)}exports.ProcessType=void 0,(i=exports.ProcessType||(exports.ProcessType={})).request="request",i.config="config",i.unique="unique";var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},a(t,e)};function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var f=function(){return f=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},f.apply(this,arguments)};function l(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function p(t,e,r,n){return new(r||(r=Promise))((function(o,i){function u(t){try{a(n.next(t))}catch(t){i(t)}}function s(t){try{a(n.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(u,s)}a((n=n.apply(t,e||[])).next())}))}function h(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(u=0)),u;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=e.call(t,u)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}var y,v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function m(t){return r(t)&&"name"in t&&"url"in t&&"method"in t}!function(t){!function(e){var r="object"==typeof v?v:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=o(t);function o(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===r.Reflect?r.Reflect=t:n=o(r.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,u={__proto__:[]}instanceof Array,s=!i&&!u,a={create:i?function(){return nt(Object.create(null))}:u?function(){return nt({__proto__:null})}:function(){return nt({})},has:s?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:s?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),f="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,p=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,h=new(f||"function"!=typeof WeakMap?rt():WeakMap);function d(t,e,r,n){if(R(r)){if(!D(t))throw new TypeError;if(!$(e))throw new TypeError;return O(t,e)}if(!D(t))throw new TypeError;if(!B(e))throw new TypeError;if(!B(n)&&!R(n)&&!K(n))throw new TypeError;return K(n)&&(n=void 0),j(t,e,r=G(r),n)}function y(t,e){function r(r,n){if(!B(r))throw new TypeError;if(!R(n)&&!V(n))throw new TypeError;M(t,e,r,n)}return r}function v(t,e,r,n){if(!B(r))throw new TypeError;return R(n)||(n=G(n)),M(t,e,r,n)}function m(t,e,r){if(!B(e))throw new TypeError;return R(r)||(r=G(r)),T(t,e,r)}function w(t,e,r){if(!B(e))throw new TypeError;return R(r)||(r=G(r)),E(t,e,r)}function g(t,e,r){if(!B(e))throw new TypeError;return R(r)||(r=G(r)),P(t,e,r)}function b(t,e,r){if(!B(e))throw new TypeError;return R(r)||(r=G(r)),I(t,e,r)}function _(t,e){if(!B(t))throw new TypeError;return R(e)||(e=G(e)),A(t,e)}function x(t,e){if(!B(t))throw new TypeError;return R(e)||(e=G(e)),C(t,e)}function k(t,e,r){if(!B(e))throw new TypeError;R(r)||(r=G(r));var n=S(e,r,!1);if(R(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var o=h.get(e);return o.delete(r),o.size>0||h.delete(e),!0}function O(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!R(n)&&!K(n)){if(!$(n))throw new TypeError;e=n}}return e}function j(t,e,r,n){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,r,n);if(!R(i)&&!K(i)){if(!B(i))throw new TypeError;n=i}}return n}function S(t,e,r){var n=h.get(t);if(R(n)){if(!r)return;n=new l,h.set(t,n)}var o=n.get(e);if(R(o)){if(!r)return;o=new l,n.set(e,o)}return o}function T(t,e,r){if(E(t,e,r))return!0;var n=Z(e);return!K(n)&&T(t,n,r)}function E(t,e,r){var n=S(e,r,!1);return!R(n)&&z(n.has(t))}function P(t,e,r){if(E(t,e,r))return I(t,e,r);var n=Z(e);return K(n)?void 0:P(t,n,r)}function I(t,e,r){var n=S(e,r,!1);if(!R(n))return n.get(t)}function M(t,e,r,n){S(r,n,!0).set(t,e)}function A(t,e){var r=C(t,e),n=Z(t);if(null===n)return r;var o=A(n,e);if(o.length<=0)return r;if(r.length<=0)return o;for(var i=new p,u=[],s=0,a=r;s<a.length;s++){var c=a[s];i.has(c)||(i.add(c),u.push(c))}for(var f=0,l=o;f<l.length;f++){c=l[f];i.has(c)||(i.add(c),u.push(c))}return u}function C(t,e){var r=[],n=S(t,e,!1);if(R(n))return r;for(var o=Y(n.keys()),i=0;;){var u=Q(o);if(!u)return r.length=i,r;var s=H(u);try{r[i]=s}catch(t){try{X(o)}finally{throw t}}i++}}function q(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function R(t){return void 0===t}function K(t){return null===t}function U(t){return"symbol"==typeof t}function B(t){return"object"==typeof t?null!==t:"function"==typeof t}function F(t,e){switch(q(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",o=J(t,n);if(void 0!==o){var i=o.call(t,r);if(B(i))throw new TypeError;return i}return L(t,"default"===r?"number":r)}function L(t,e){if("string"===e){var r=t.toString;if(N(r))if(!B(o=r.call(t)))return o;if(N(n=t.valueOf))if(!B(o=n.call(t)))return o}else{var n;if(N(n=t.valueOf))if(!B(o=n.call(t)))return o;var o,i=t.toString;if(N(i))if(!B(o=i.call(t)))return o}throw new TypeError}function z(t){return!!t}function W(t){return""+t}function G(t){var e=F(t,3);return U(e)?e:W(e)}function D(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function N(t){return"function"==typeof t}function $(t){return"function"==typeof t}function V(t){switch(q(t)){case 3:case 4:return!0;default:return!1}}function J(t,e){var r=t[e];if(null!=r){if(!N(r))throw new TypeError;return r}}function Y(t){var e=J(t,o);if(!N(e))throw new TypeError;var r=e.call(t);if(!B(r))throw new TypeError;return r}function H(t){return t.value}function Q(t){var e=t.next();return!e.done&&e}function X(t){var e=t.return;e&&e.call(t)}function Z(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var o=n.constructor;return"function"!=typeof o||o===t?e:o}function tt(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,o=r+1;o<n;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,i)},e.prototype.entries=function(){return new r(this._keys,this._values,u)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function i(t,e){return e}function u(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function rt(){var t=16,r=a.create(),n=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&a.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?a.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+c()}while(a.has(r,t));return r[t]=!0,t}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:a.create()})}return t[n]}function u(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function s(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):u(new Uint8Array(t),t):u(new Array(t),t)}function c(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var o=e[n];4!==n&&6!==n&&8!==n||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}function nt(t){return t.__=void 0,delete t.__,t}t("decorate",d),t("metadata",y),t("defineMetadata",v),t("hasMetadata",m),t("hasOwnMetadata",w),t("getMetadata",g),t("getOwnMetadata",b),t("getMetadataKeys",_),t("getOwnMetadataKeys",x),t("deleteMetadata",k)}(n)}()}(y||(y={}));var w=function(){function t(t){this.sources=[],t&&t.services&&t.services.length&&(this.sources=t.services.reduce((function(t,e){var r=g(e);return r&&t.push(r),t}),[]))}return t.prototype.register=function(t){var e=g(t);e&&this.sources.push(e)},t.prototype.find=function(t){return this.sources.find((function(e){return e.name===t}))},t}();function g(t){var n,o;if(m(t)&&(n=t),(o=t)&&"Array"===e(o)){var i=t,u=i[0],s=i[1],a=i[2],c=i[3];if(!u||!s||!a)return;n=f({name:u,method:s,url:a},r(c)?c:{})}return n}var b=function(){function t(){this.name="base";var t=this.handle;this.handle=function(e,r){var n;return p(this,void 0,void 0,(function(){var i,u,a,c,f,l,p,y,v;return h(this,(function(h){switch(h.label){case 0:i=(null===(n=e.service)||void 0===n?void 0:n.middleware)||[],u="before"+o(this.name),r.emitter.emit(u,{name:this.name,ctx:e}),a=i.reduce((function(t,e){if("string"==typeof e){var n=r.middleware.find(e);n&&n.at===u&&t.push(n)}else e.at===u&&t.push(e);return t}),[]),c=r.middleware.getGlobal(u),h.label=1;case 1:return h.trys.push([1,7,,8]),a.length>0||c.length>0?(r.emitter.emit(u,{name:this.name,ctx:e}),[4,r.pipe.exec(d(d([],c,!0),a,!0),e,r)]):[3,3];case 2:h.sent(),h.label=3;case 3:return[4,t.call(this,e,r)];case 4:return f=h.sent(),l="after"+o(this.name),p=i.reduce((function(t,e){if("string"==typeof e){var n=r.middleware.find(e);n&&n.at===l&&t.push(n)}else e.at===l&&t.push(e);return t}),[]),y=r.middleware.getGlobal(l),p.length>0||y.length>0?[4,r.pipe.exec(d(d([],y,!0),p,!0),e,r)]:[3,6];case 5:h.sent(),h.label=6;case 6:return r.emitter.emit(l,{name:this.name,ctx:e}),[2,f];case 7:throw v=h.sent(),r.emitter.emit(s(this.name),v),v;case 8:return[2]}}))}))}.bind(this)}return t.prototype.handle=function(t,e){},t}(),_=function(t){function e(e){var r=t.call(this,e)||this;return r.name="UniqueError",r}return c(e,t),e}(Error),x=function(t){function e(e){var r=t.call(this)||this;return r.name=exports.ProcessType.unique,r.interval=0,r.interval=e.interval,r}return c(e,t),e.prototype.handle=function(t,e){return p(this,void 0,void 0,(function(){return h(this,(function(r){return e.bucket.verify(t.id,this.interval)?[2]:[2,new _(t.service.name||t.service.url)]}))}))},e}(b),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=exports.ProcessType.config,e}return c(e,t),e.prototype.handle=function(e,r){return p(this,void 0,void 0,(function(){var o,i,u,s;return h(this,(function(a){if(o=e.initParams,i=o.name,u=l(o,["name"]),i&&n(i))s=r.service.find(i),e.service=s;else{if(!u.url)return[2,new Error("service not config!")];e.params=f({method:u.method||"get"},u)}return e.params=u,e.id=r.bucket.getId(e.params),t.prototype.handle.call(this,e,r),[2]}))}))},e}(b);function O(t){return null===t?"null":void 0===t?"undefined":"object"==typeof t?Array.isArray(t)?"array":"object":typeof t}function j(t){return"object"===O(t)?T(t):"array"===O(t)?S(t):t}function S(t){return t.map(j)}function T(t){const e={};for(const r in t)t.hasOwnProperty(r)&&(e[r]=j(t[r]));return e}function E(t,e=[],r={}){const n={arrayBehaviour:r.arrayBehaviour||"replace"},o=e.map((t=>t||{})),i=t||{};for(let t=0;t<o.length;t++){const e=o[t],r=Object.keys(e);for(let t=0;t<r.length;t++){const o=r[t],u=e[o],s=O(u),a=O(i[o]);if("object"===s)if("undefined"!==a){const t="object"===a?i[o]:{};i[o]=E({},[t,T(u)],n)}else i[o]=T(u);else if("array"===s)if("array"===a){const t=S(u);i[o]="merge"===n.arrayBehaviour?i[o].concat(t):t}else i[o]=S(u);else i[o]=u}}return i}function P(t,...e){return E(t,e)}const I=function(...t){return E({},t)};var M=function(e){function r(r){var n=e.call(this)||this;return n.name=exports.ProcessType.request,n.axiosInstance=t.create(r),n}return c(r,e),r.prototype.handle=function(e,r){var n,o,i,u,s,a,c,l,d,y;return p(this,void 0,void 0,(function(){var p,v,m,w,g,b,_,x,k,O,j,S,T,E,M;return h(this,(function(h){switch(h.label){case 0:switch(p=e.id,v=e.params,m=e.config,w=e.service,g=v.url,b=v.path,_=v.method,x=v.params,k=v.data,O=v.cancel,j=f({url:g,method:_},m),p&&(j.cancelToken=new t.CancelToken((function(t){e.cancel=t,O&&"function"==typeof O&&O(t,p)}))),null===(n=null==w?void 0:w.default)||void 0===n?void 0:n.assign){case"default":S=P(b,null===(o=null==w?void 0:w.default)||void 0===o?void 0:o.path),T=P(x,null===(i=null==w?void 0:w.default)||void 0===i?void 0:i.params),E=P(k,null===(u=null==w?void 0:w.default)||void 0===u?void 0:u.data);break;case"mixin":S=I(null===(s=null==w?void 0:w.default)||void 0===s?void 0:s.path,b),T=I(null===(a=null==w?void 0:w.default)||void 0===a?void 0:a.params,x),E=I(null===(c=null==w?void 0:w.default)||void 0===c?void 0:c.data,k);break;default:S=P(null===(l=null==w?void 0:w.default)||void 0===l?void 0:l.path,b),T=P(null===(d=null==w?void 0:w.default)||void 0===d?void 0:d.params,x),E=P(null===(y=null==w?void 0:w.default)||void 0===y?void 0:y.data,k)}return j.url=function(t,e){return void 0===e&&(e={}),t.split("/").map((function(t){return new RegExp("^:").test(t)&&e[t.replace(":","")]?e[t.replace(":","")]:t})).join("/")}(g,S),j.params=T,j.data=E,M=e,[4,this.axiosInstance.request(j)];case 1:return M.response=h.sent(),e.response.success=!0,r.bucket.pop(e.id),[2]}}))}))},r}(b),A=function(){function t(t){this.sources=[];var e=t||{},r=e.interval,n=e.requesterConfig,o=[];if(o.push(new k),r>0&&o.push(new x({interval:r})),"object"!=typeof window)throw new Error("not support current system env!");o.push(new M(n)),this.sources=o}return t.prototype.push=function(t){return this.sources.push(t),this},t.prototype.before=function(t,e){var r=this._getIndex(t);return 0===r?this.sources.unshift(e):this.sources.splice(r,0,e),this},t.prototype.after=function(t,e){var r=this._getIndex(t);return this.sources.splice(0===r?1:r+1,0,e),this},t.prototype.replace=function(t,e){var r=this._getIndex(t);return this.sources[r]=e,this},t.prototype.remove=function(t){var e=this._getIndex(t);return this.sources.splice(e,1),this},t.prototype._getIndex=function(t){return"number"==typeof t?Math.floor(t):this.sources.findIndex((function(e){return e.name===t}))},t.prototype.register=function(t){this.sources.push(t)},t}(),C=function(){function t(){this.name="base"}return t.prototype.handle=function(){},t}(),q=function(){function t(t){var e;this.sources=[],(null===(e=null==t?void 0:t.middlewares)||void 0===e?void 0:e.length)>0&&(this.sources=t.middlewares.filter(this.verify))}return t.prototype.register=function(t){if(this.verify(t))return this.sources.push(t),t.name},t.prototype.verify=function(t){return(null==t?void 0:t.at)&&(null==t?void 0:t.name)&&(null==t?void 0:t.handle)&&((r=t.handle)&&"Function"===e(r));var r},t.prototype.find=function(t){return this.sources.find((function(e){return e.name===t}))},t.prototype.getGlobal=function(t){return this.sources.filter((function(e){return!0===e.global&&e.at===t}))},t}();var R=function(){function t(){this.requests={}}return t.prototype.getId=function(t){var e=t.url,r=t.method,n=t.params,o=t.path,i=t.data;return this._getId({url:e,method:r,params:n,path:o,data:i})},t.prototype.verify=function(t,e){var r=this.requests[t];return!((null==r?void 0:r.timestamp)+e>Date.now())&&(this.requests[t]={timestamp:Date.now()},t)},t.prototype.pop=function(t){delete this.requests[t]},t.prototype._getId=function(t){return function(t){function e(t,e){return t<<e|t>>>32-e}function r(t,e){var r,n,o,i,u;return o=2147483648&t,i=2147483648&e,u=(1073741823&t)+(1073741823&e),(r=1073741824&t)&(n=1073741824&e)?2147483648^u^o^i:r|n?1073741824&u?3221225472^u^o^i:1073741824^u^o^i:u^o^i}function n(t,n,o,i,u,s,a){return t=r(t,r(r(function(t,e,r){return t&e|~t&r}(n,o,i),u),a)),r(e(t,s),n)}function o(t,n,o,i,u,s,a){return t=r(t,r(r(function(t,e,r){return t&r|e&~r}(n,o,i),u),a)),r(e(t,s),n)}function i(t,n,o,i,u,s,a){return t=r(t,r(r(function(t,e,r){return t^e^r}(n,o,i),u),a)),r(e(t,s),n)}function u(t,n,o,i,u,s,a){return t=r(t,r(r(function(t,e,r){return e^(t|~r)}(n,o,i),u),a)),r(e(t,s),n)}function s(t){var e,r="",n="";for(e=0;3>=e;e++)r+=(n="0"+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return r}var a,c,f,l,p,h,d,y,v,m;for(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);128>n?e+=String.fromCharCode(n):n>127&&2048>n?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t),m=function(t){for(var e,r=t.length,n=r+8,o=16*((n-n%64)/64+1),i=new Array(o-1),u=0,s=0;r>s;)u=s%4*8,i[e=(s-s%4)/4]=i[e]|t.charCodeAt(s)<<u,s++;return u=s%4*8,i[e=(s-s%4)/4]=i[e]|128<<u,i[o-2]=r<<3,i[o-1]=r>>>29,i}(t),h=1732584193,d=4023233417,y=2562383102,v=271733878,a=0;a<m.length;a+=16)c=h,f=d,l=y,p=v,h=n(h,d,y,v,m[a+0],7,3614090360),v=n(v,h,d,y,m[a+1],12,3905402710),y=n(y,v,h,d,m[a+2],17,606105819),d=n(d,y,v,h,m[a+3],22,3250441966),h=n(h,d,y,v,m[a+4],7,4118548399),v=n(v,h,d,y,m[a+5],12,1200080426),y=n(y,v,h,d,m[a+6],17,2821735955),d=n(d,y,v,h,m[a+7],22,4249261313),h=n(h,d,y,v,m[a+8],7,1770035416),v=n(v,h,d,y,m[a+9],12,2336552879),y=n(y,v,h,d,m[a+10],17,4294925233),d=n(d,y,v,h,m[a+11],22,2304563134),h=n(h,d,y,v,m[a+12],7,1804603682),v=n(v,h,d,y,m[a+13],12,4254626195),y=n(y,v,h,d,m[a+14],17,2792965006),h=o(h,d=n(d,y,v,h,m[a+15],22,1236535329),y,v,m[a+1],5,4129170786),v=o(v,h,d,y,m[a+6],9,3225465664),y=o(y,v,h,d,m[a+11],14,643717713),d=o(d,y,v,h,m[a+0],20,3921069994),h=o(h,d,y,v,m[a+5],5,3593408605),v=o(v,h,d,y,m[a+10],9,38016083),y=o(y,v,h,d,m[a+15],14,3634488961),d=o(d,y,v,h,m[a+4],20,3889429448),h=o(h,d,y,v,m[a+9],5,568446438),v=o(v,h,d,y,m[a+14],9,3275163606),y=o(y,v,h,d,m[a+3],14,4107603335),d=o(d,y,v,h,m[a+8],20,1163531501),h=o(h,d,y,v,m[a+13],5,2850285829),v=o(v,h,d,y,m[a+2],9,4243563512),y=o(y,v,h,d,m[a+7],14,1735328473),h=i(h,d=o(d,y,v,h,m[a+12],20,2368359562),y,v,m[a+5],4,4294588738),v=i(v,h,d,y,m[a+8],11,2272392833),y=i(y,v,h,d,m[a+11],16,1839030562),d=i(d,y,v,h,m[a+14],23,4259657740),h=i(h,d,y,v,m[a+1],4,2763975236),v=i(v,h,d,y,m[a+4],11,1272893353),y=i(y,v,h,d,m[a+7],16,4139469664),d=i(d,y,v,h,m[a+10],23,3200236656),h=i(h,d,y,v,m[a+13],4,681279174),v=i(v,h,d,y,m[a+0],11,3936430074),y=i(y,v,h,d,m[a+3],16,3572445317),d=i(d,y,v,h,m[a+6],23,76029189),h=i(h,d,y,v,m[a+9],4,3654602809),v=i(v,h,d,y,m[a+12],11,3873151461),y=i(y,v,h,d,m[a+15],16,530742520),h=u(h,d=i(d,y,v,h,m[a+2],23,3299628645),y,v,m[a+0],6,4096336452),v=u(v,h,d,y,m[a+7],10,1126891415),y=u(y,v,h,d,m[a+14],15,2878612391),d=u(d,y,v,h,m[a+5],21,4237533241),h=u(h,d,y,v,m[a+12],6,1700485571),v=u(v,h,d,y,m[a+3],10,2399980690),y=u(y,v,h,d,m[a+10],15,4293915773),d=u(d,y,v,h,m[a+1],21,2240044497),h=u(h,d,y,v,m[a+8],6,1873313359),v=u(v,h,d,y,m[a+15],10,4264355552),y=u(y,v,h,d,m[a+6],15,2734768916),d=u(d,y,v,h,m[a+13],21,1309151649),h=u(h,d,y,v,m[a+4],6,4149444226),v=u(v,h,d,y,m[a+11],10,3174756917),y=u(y,v,h,d,m[a+2],15,718787259),d=u(d,y,v,h,m[a+9],21,3951481745),h=r(h,c),d=r(d,f),y=r(y,l),v=r(v,p);return(s(h)+s(d)+s(y)+s(v)).toLowerCase()}(Object.keys(t).sort().map((function(e){var r,n=t[e];if("object"==typeof n)try{r=JSON.stringify(n)}catch(t){}else r="".concat(e,"=").concat(n);return r})).join("&"))},t}(),K=function(){function t(){this.events={}}return t.prototype.on=function(t,e){if(t&&e&&"function"==typeof e){var r=this.events[t];r?r.push(e):this.events[t]=[e]}},t.prototype.off=function(t,e){if(t){var r=this.events[t];if(r){var n=r.indexOf(e);n>-1?r.splice(n,1):this.events[t]=[]}}},t.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(this.events[t]||[]).forEach((function(t){t&&t.apply(void 0,e)}))},t}(),U=function(){function t(){}return t.prototype.exec=function(t,e,r){return p(this,void 0,void 0,(function(){function n(o){return p(this,void 0,void 0,(function(){var i,u;return h(this,(function(s){switch(s.label){case 0:return o>=t.length?[2]:(i=t[o],e.step=i.name,[4,i.handle(e,r)]);case 1:if(u=s.sent())throw u;return[4,n(o+1)];case 2:return s.sent(),[2]}}))}))}return h(this,(function(t){switch(t.label){case 0:return[4,n(0)];case 1:return t.sent(),[2,e.response]}}))}))},t}(),B=function(){function t(t){this.pipe=new U,this.bucket=new R,this.emitter=new K,this.middleware=new q(t),this.processor=new A(t),this.service=new w(t)}return t.prototype.send=function(t){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.pipe.exec(this.processor.sources,new u(t),{pipe:this.pipe,bucket:this.bucket,emitter:this.emitter,service:this.service,processor:this.processor,middleware:this.middleware})];case 1:return[2,e.sent()]}}))}))},t.prototype.get=function(t,e){return this.send(f(f({},e),{method:"get",url:t}))},t.prototype.post=function(t,e){return this.send(f(f({},e),{method:"post",url:t}))},t.prototype.put=function(t,e){return this.send(f(f({},e),{method:"put",url:t}))},t.prototype.delete=function(t,e){return this.send(f(f({},e),{method:"delete",url:t}))},t.prototype.patch=function(t,e){return this.send(f(f({},e),{method:"patch",url:t}))},t.prototype.install=function(t){t.config&&t.config.globalProperties?t.config.globalProperties.$http=this:t.constructor&&(t.prototype.$http=this)},t}(),F=Symbol("service"),L=Symbol("middleware");exports.After=function(t){return"after"+o(t)},exports.BaseMiddleware=C,exports.BaseProcessor=b,exports.Before=function(t){return"before"+o(t)},exports.Context=u,exports.MiddlewareStack=q,exports.ProcessorStack=A,exports.ServiceStack=w,exports.Wrong=s,exports.WuhaoNetwork=B,exports.createNetwork=function(t){if(!B.simpleInstance){var e=Reflect.getMetadata(F,w)||[],r=Reflect.getMetadata(L,q)||[],n=t||{},o=n.services,i=void 0===o?[]:o,u=n.middlewares,s=void 0===u?[]:u,a=l(n,["services","middlewares"]);B.simpleInstance=new B(f(f({},a),{services:d(d([],i,!0),e,!0),middlewares:d(d([],s.map((function(t){return"boolean"==typeof t.global||(t.global=!0),t})),!0),r,!0)}))}return B.simpleInstance},exports.isService=m,exports.transformService=g,exports.useFetch=function(t,e){if(B.simpleInstance){var r=B.simpleInstance.service.sources.find((function(e){return e.name===t}));return B.simpleInstance.send(f(f({},r),e))}},exports.useMiddleware=function(t){if(t){if(!B.simpleInstance){var e=Reflect.getMetadata(L,q)||[];if(e.some((function(e){return e.name===t.name})))throw new Error("middleware [".concat(t.name,"] duplicate definition!"));return e.push(t),Reflect.defineMetadata(L,e,q),t.name}return B.simpleInstance.middleware.register(t)}},exports.useService=function(t,e){var r=g(t);if(r){if(e)if(B.simpleInstance)B.simpleInstance.service.register(r);else{var n=Reflect.getMetadata(F,w)||[];(0===n.length||n.some((function(t){return t.name!==r.name})))&&n.push(r),Reflect.defineMetadata(F,n,w)}return function(t){return B.simpleInstance.send(f(f({},r),t||{}))}}};
//# sourceMappingURL=index.cjs.js.map
